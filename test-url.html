<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test URL Preview</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-box {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #218838;
        }
        .preview {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            min-height: 200px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .preview img, .preview video {
            max-width: 100%;
            max-height: 400px;
        }
        .error {
            color: red;
            padding: 10px;
            background: #ffe6e6;
            border-radius: 4px;
        }
        .success {
            color: green;
            padding: 10px;
            background: #e6ffe6;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üß™ Test URL cho Hover Preview</h1>
    
    <div class="test-box">
        <h3>Nh·∫≠p URL ƒë·ªÉ test:</h3>
        <input type="text" id="urlInput" placeholder="https://i.imgur.com/example.png">
        <button onclick="testUrl()">Test URL</button>
        
        <div id="result"></div>
        <div id="preview" class="preview"></div>
    </div>

    <div class="test-box">
        <h3>üìù Format URL ƒë∆∞·ª£c support:</h3>
        <ul>
            <li>‚úÖ Images: .jpg, .jpeg, .png, .gif, .webp, .svg</li>
            <li>‚úÖ Videos: .mp4, .webm, .ogg</li>
            <li>‚ùå Kh√¥ng support: Links c√≥ authentication, Dropbox/OneDrive tr·ª±c ti·∫øp</li>
        </ul>
    </div>

    <div class="test-box">
        <h3>üîó C√¥ng c·ª• l·∫•y URL:</h3>
        <ol>
            <li><strong>Imgur:</strong> <a href="https://imgur.com/upload" target="_blank">imgur.com/upload</a> ‚Üí Copy "Direct Link"</li>
            <li><strong>Cloudinary:</strong> <a href="https://cloudinary.com" target="_blank">cloudinary.com</a> ‚Üí Free 25GB</li>
            <li><strong>Google Drive:</strong> Share public ‚Üí Convert URL sang format: <code>https://drive.google.com/uc?id=FILE_ID</code></li>
        </ol>
        
        <h3>‚ö†Ô∏è URLs KH√îNG work:</h3>
        <ul>
            <li>‚ùå <strong>Streamable:</strong> https://streamable.com/xyz (embed page)</li>
            <li>‚ùå <strong>YouTube:</strong> https://youtube.com/watch?v=xyz (embed page)</li>
            <li>‚ùå <strong>Google Drive view:</strong> https://drive.google.com/file/d/xyz/view (view page)</li>
            <li>‚ùå <strong>Dropbox:</strong> https://www.dropbox.com/s/xyz (landing page)</li>
        </ul>
        
        <h3>‚úÖ URLs work:</h3>
        <ul>
            <li>‚úÖ <strong>Direct files:</strong> https://domain.com/video.mp4, image.jpg</li>
            <li>‚úÖ <strong>Cloudinary:</strong> https://res.cloudinary.com/.../video.mp4</li>
            <li>‚úÖ <strong>Imgur direct:</strong> https://i.imgur.com/abc123.jpg</li>
            <li>‚úÖ <strong>CDN links:</strong> B·∫•t k·ª≥ CDN n√†o serve direct file</li>
        </ul>
    </div>

    <script>
        function testUrl() {
            const url = document.getElementById('urlInput').value.trim();
            const resultDiv = document.getElementById('result');
            const previewDiv = document.getElementById('preview');
            
            if (!url) {
                resultDiv.innerHTML = '<div class="error">‚ùå Vui l√≤ng nh·∫≠p URL</div>';
                return;
            }

            // Check if valid URL
            try {
                new URL(url);
            } catch (e) {
                resultDiv.innerHTML = '<div class="error">‚ùå URL kh√¥ng h·ª£p l·ªá</div>';
                return;
            }

            // Detect media type
            const urlLower = url.toLowerCase();
            const isImage = /\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i.test(urlLower) || url.includes('imgur.com') || url.includes('drive.google.com/uc');
            const isVideo = /\.(mp4|webm|ogg)(\?|$)/i.test(urlLower);

            resultDiv.innerHTML = '<div class="success">‚è≥ ƒêang load...</div>';
            previewDiv.innerHTML = '';

            if (isImage) {
                const img = document.createElement('img');
                img.src = url;
                img.onload = function() {
                    resultDiv.innerHTML = '<div class="success">‚úÖ Image load th√†nh c√¥ng! T∆∞∆°ng th√≠ch v·ªõi hover.</div>';
                    previewDiv.appendChild(img);
                };
                img.onerror = function() {
                    resultDiv.innerHTML = '<div class="error">‚ùå Kh√¥ng th·ªÉ load image. Ki·ªÉm tra:<br>- URL c√≥ public kh√¥ng?<br>- Format c√≥ ƒë√∫ng kh√¥ng?<br>- CORS c√≥ b·ªã block kh√¥ng?</div>';
                };
            } else if (isVideo) {
                const video = document.createElement('video');
                video.src = url;
                video.controls = true;
                video.autoplay = true;
                video.muted = true;
                video.onloadeddata = function() {
                    resultDiv.innerHTML = '<div class="success">‚úÖ Video load th√†nh c√¥ng! T∆∞∆°ng th√≠ch v·ªõi hover.</div>';
                    previewDiv.appendChild(video);
                };
                video.onerror = function() {
                    resultDiv.innerHTML = '<div class="error">‚ùå Kh√¥ng th·ªÉ load video. Ki·ªÉm tra URL v√† format.</div>';
                };
            } else {
                resultDiv.innerHTML = '<div class="error">‚ùå URL kh√¥ng c√≥ extension h·ª£p l·ªá (.jpg, .png, .mp4, etc.)</div>';
            }
        }

        // Allow Enter key
        document.getElementById('urlInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                testUrl();
            }
        });
    </script>
</body>
</html>
